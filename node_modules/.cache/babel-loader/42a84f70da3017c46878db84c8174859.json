{"ast":null,"code":"import _classCallCheck from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import ImageList from\"@mui/material/ImageList\";import ImageListItem from\"@mui/material/ImageListItem\";import ImageListItemBar from\"@mui/material/ImageListItemBar\";import{genreIds}from\"./genreIds\";import{languages}from\"./languages\";import MovieButton from\"./MovieButton\";import axios from\"axios\";import LoadPage from\"../LoadPage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getNumberCols(){var _window=window,width=_window.innerWidth;return Math.floor(width/250);}function getGenreID(genre){for(var i=0;i<genreIds.length;i++){if(genreIds[i][\"name\"]===genre){return genreIds[i][\"id\"];}}}function getLanguageID(lang){for(var i=0;i<languages.length;i++){if(languages[i][\"name\"]===lang){return languages[i][\"id\"];}}}function getSortingMethod(sort){if(sort==0){return\"vote_average\";}else if(sort=1){return\"popularity\";}else{return\"primary_release\";}}function getStreaming(streamingService){console.log(streamingService);if(streamingService.length===0){return\"all\";}else{return streamingService.join('|');}}function makeSearch(props){if(props.search!=\"\"){return\"/searchByTitle/\"+props.search;}else{var cert=\"\";console.log(props);for(var i=0;i<props.rating.length-1;i++){cert+=props.rating[i]+\"|\";}cert+=props.rating[props.rating.length-1];var genres=\"\";for(var _i=0;_i<props.genreName.length-1;_i++){genres+=getGenreID(props.genreName[_i])+\"|\";}genres+=getGenreID(props.genreName[props.genreName.length-1]);var _languages=\"\";for(var _i2=0;_i2<props.languageName.length-1;_i2++){_languages+=getLanguageID(props.languageName[_i2])+\"|\";}_languages+=getLanguageID(props.languageName[props.languageName.length-1]);var watchFiler=props.seenIt?\"true\":\"false\";return\"/filters/\"+watchFiler+\"/\"+cert+\"/\"+props.year[0]+\"/\"+props.year[1]+\"/\"+props.runTime[0]+\"/\"+props.runTime[1]+\"/\"+genres+\"/\"+_languages+\"/\"+getSortingMethod(props.sortingMethod)+\".\"+(props.sortingDirection?\"asc\":\"desc\")+\"/\"+getStreaming(props.streamingService);}}var PageContents=/*#__PURE__*/function(_React$Component){_inherits(PageContents,_React$Component);var _super=_createSuper(PageContents);function PageContents(){var _this;_classCallCheck(this,PageContents);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],oldprops:{}};return _this;}_createClass(PageContents,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);axios.get(makeSearch(this.props)).then(function(res){console.log(res[\"data\"][\"results\"]);var movies=res[\"data\"][\"results\"];var oldprops=_this2.props;_this2.setState({movies:movies,oldprops:oldprops});});console.log(this.state);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this3=this;if(makeSearch(this.props)!=makeSearch(this.state.oldprops)){console.log(this.props);axios.get(makeSearch(this.props)).then(function(res){console.log(res[\"data\"][\"results\"]);var movies=res[\"data\"][\"results\"];var oldprops=_this3.props;_this3.setState({movies:movies,oldprops:oldprops});});console.log(this.state);}}},{key:\"render\",value:function render(){return makeSearch(this.props)!=makeSearch(this.state.oldprops)?/*#__PURE__*/_jsx(ImageList,{cols:getNumberCols(),children:this.state.movies.map(function(item){return item.poster_path&&/*#__PURE__*/_jsxs(ImageListItem,{children:[/*#__PURE__*/_jsx(\"img\",{src:item.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(item.poster_path):\"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\",srcSet:item.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(item.poster_path):\"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\",alt:item.title,loading:\"lazy\"}),/*#__PURE__*/_jsx(ImageListItemBar,{position:\"bottom\",sx:{background:'rgba(0,0,0,0)'},actionIcon:/*#__PURE__*/_jsx(MovieButton,{id:item.id})})]},item.poster_path);})}):/*#__PURE__*/_jsx(LoadPage,{open:true});}}]);return PageContents;}(React.Component);export{PageContents as default};","map":{"version":3,"sources":["/home/lgentle/repos/CSCapstoneProject/react/cscapstone/src/components/GridPageContents/PageContents.js"],"names":["React","ImageList","ImageListItem","ImageListItemBar","genreIds","languages","MovieButton","axios","LoadPage","getNumberCols","window","width","innerWidth","Math","floor","getGenreID","genre","i","length","getLanguageID","lang","getSortingMethod","sort","getStreaming","streamingService","console","log","join","makeSearch","props","search","cert","rating","genres","genreName","languageName","watchFiler","seenIt","year","runTime","sortingMethod","sortingDirection","PageContents","state","movies","oldprops","get","then","res","setState","map","item","poster_path","title","background","id","Component"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from \"@mui/material/ImageListItem\";\nimport ImageListItemBar from \"@mui/material/ImageListItemBar\";\nimport { genreIds } from \"./genreIds\";\nimport { languages } from \"./languages\";\nimport MovieButton from \"./MovieButton\";\nimport axios from \"axios\";\nimport LoadPage from \"../LoadPage\"\nfunction getNumberCols() {\n  const { innerWidth: width } = window;\n  return Math.floor(width / 250);\n}\n\nfunction getGenreID(genre) {\n  for (let i = 0; i < genreIds.length; i++) {\n    if (genreIds[i][\"name\"] === genre) {\n      return genreIds[i][\"id\"];\n    }\n  }\n}\n\nfunction getLanguageID(lang) {\n  for (let i = 0; i < languages.length; i++) {\n    if (languages[i][\"name\"] === lang) {\n      return languages[i][\"id\"];\n    }\n  }\n}\n\nfunction getSortingMethod(sort) {\n  if (sort == 0) {\n    return \"vote_average\";\n  } else if ((sort = 1)) {\n    return \"popularity\";\n  } else {\n    return \"primary_release\";\n  }\n}\n\nfunction getStreaming(streamingService) {\n  console.log(streamingService)\n  if(streamingService.length === 0) {\n    return \"all\"\n  } else {\n  return streamingService.join('|')\n  }\n}\n\n\nfunction makeSearch(props) {\n  if (props.search != \"\") {\n    return \"/searchByTitle/\" + props.search;\n  } else {\n    let cert = \"\";\n    console.log(props);\n    for (let i = 0; i < props.rating.length - 1; i++) {\n      cert += props.rating[i] + \"|\";\n    }\n    cert += props.rating[props.rating.length - 1];\n\n    let genres = \"\";\n    for (let i = 0; i < props.genreName.length - 1; i++) {\n      genres += getGenreID(props.genreName[i]) + \"|\";\n    }\n    genres += getGenreID(props.genreName[props.genreName.length - 1]);\n\n    let languages = \"\";\n    for (let i = 0; i < props.languageName.length - 1; i++) {\n      languages += getLanguageID(props.languageName[i]) + \"|\";\n    }\n    languages += getLanguageID(\n      props.languageName[props.languageName.length - 1]\n    );\n\n    let watchFiler = props.seenIt?\"true\":\"false\"\n\n    return (\n      \"/filters/\" +\n      watchFiler +\n      \"/\" +\n      cert +\n      \"/\" +\n      props.year[0] +\n      \"/\" +\n      props.year[1] +\n      \"/\" +\n      props.runTime[0] +\n      \"/\" +\n      props.runTime[1] +\n      \"/\" +\n      genres +\n      \"/\" +\n      languages +\n      \"/\" +\n      getSortingMethod(props.sortingMethod) +\n      \".\" +\n      (props.sortingDirection ? \"asc\" : \"desc\") + \n      \"/\" +\n      getStreaming(props.streamingService)\n    );\n  }\n}\n\nexport default class PageContents extends React.Component {\n  state = {\n    movies: [],\n    oldprops: {},\n  };\n\n  componentDidMount() {\n    console.log(this.props);\n    axios.get(makeSearch(this.props)).then((res) => {\n      console.log(res[\"data\"][\"results\"]);\n      const movies = res[\"data\"][\"results\"];\n      const oldprops = this.props;\n      this.setState({ movies, oldprops });\n    });\n    console.log(this.state);\n  }\n  componentDidUpdate() {\n    if (makeSearch(this.props) != makeSearch(this.state.oldprops)) {\n      console.log(this.props);\n      axios.get(makeSearch(this.props)).then((res) => {\n        console.log(res[\"data\"][\"results\"]);\n        const movies = res[\"data\"][\"results\"];\n        const oldprops = this.props;\n        this.setState({ movies, oldprops });\n      });\n      console.log(this.state);\n    }\n  }\n\n  render() {\n    return (\n      makeSearch(this.props) != makeSearch(this.state.oldprops)?<ImageList cols={getNumberCols()}>\n        {this.state.movies.map(\n          (item) =>\n            item.poster_path && (\n              <ImageListItem key={item.poster_path}>\n                <img\n                  src={\n                    item.poster_path\n                      ? `https://image.tmdb.org/t/p/w500${item.poster_path}`\n                      : \"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\"\n                  }\n                  srcSet={\n                    item.poster_path\n                      ? `https://image.tmdb.org/t/p/w500${item.poster_path}`\n                      : \"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\"\n                  }\n                  alt={item.title}\n                  loading=\"lazy\"\n                />\n                <ImageListItemBar\n                  position=\"bottom\"\n                  sx={{\n                    background:'rgba(0,0,0,0)',\n                  }}\n                  actionIcon={\n                    <MovieButton id={item.id}/>\n                  }\n                />\n              </ImageListItem>\n            )\n        )}\n      </ImageList>:<LoadPage open={true}/>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}