{"ast":null,"code":"import _classCallCheck from\"/home/lgentle/repos/CSCapstoneProject/react copy/cscapstone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lgentle/repos/CSCapstoneProject/react copy/cscapstone/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lgentle/repos/CSCapstoneProject/react copy/cscapstone/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lgentle/repos/CSCapstoneProject/react copy/cscapstone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import ImageList from\"@mui/material/ImageList\";import ImageListItem from\"@mui/material/ImageListItem\";import ImageListItemBar from\"@mui/material/ImageListItemBar\";import{genreIds}from\"./genreIds\";import{languages}from\"./languages\";import MovieButton from\"./MovieButton\";import axios from\"axios\";import LoadPage from\"../LoadPage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getNumberCols(){var _window=window,width=_window.innerWidth;return Math.floor(width/250);}function getGenreID(genre){for(var i=0;i<genreIds.length;i++){if(genreIds[i][\"name\"]===genre){return genreIds[i][\"id\"];}}}function getLanguageID(lang){for(var i=0;i<languages.length;i++){if(languages[i][\"name\"]===lang){return languages[i][\"id\"];}}}function getSortingMethod(sort){if(sort===0){return\"vote_average\";}else if(sort=1){return\"popularity\";}else{return\"primary_release\";}}function getStreaming(streamingService){console.log(streamingService);if(streamingService.length===0){return\"all\";}else{return streamingService.join(\"|\");}}function makeSearch(props){if(props.search!==\"\"){return\"/searchByTitle/\"+props.search;}else{var cert=\"\";console.log(props);for(var i=0;i<props.rating.length-1;i++){cert+=props.rating[i]+\"|\";}cert+=props.rating[props.rating.length-1];var genres=\"\";for(var _i=0;_i<props.genreName.length-1;_i++){genres+=getGenreID(props.genreName[_i])+\"|\";}genres+=getGenreID(props.genreName[props.genreName.length-1]);var _languages=\"\";for(var _i2=0;_i2<props.languageName.length-1;_i2++){_languages+=getLanguageID(props.languageName[_i2])+\"|\";}_languages+=getLanguageID(props.languageName[props.languageName.length-1]);var watchFiler=props.seenIt?\"true\":\"false\";return\"/filters/\"+watchFiler+\"/\"+cert+\"/\"+props.year[0]+\"/\"+props.year[1]+\"/\"+props.runTime[0]+\"/\"+props.runTime[1]+\"/\"+genres+\"/\"+_languages+\"/\"+getSortingMethod(props.sortingMethod)+\".\"+(props.sortingDirection?\"asc\":\"desc\")+\"/\"+getStreaming(props.streamingService);}}var PageContents=/*#__PURE__*/function(_React$Component){_inherits(PageContents,_React$Component);var _super=_createSuper(PageContents);function PageContents(){var _this;_classCallCheck(this,PageContents);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],oldprops:{}};return _this;}_createClass(PageContents,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);axios.get(makeSearch(this.props)).then(function(res){console.log(res[\"data\"][\"results\"]);var movies=res[\"data\"][\"results\"];var oldprops=_this2.props;_this2.setState({movies:movies,oldprops:oldprops});});console.log(this.state);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this3=this;if(makeSearch(this.props)!==makeSearch(this.state.oldprops)){console.log(this.props);axios.get(makeSearch(this.props)).then(function(res){console.log(res[\"data\"][\"results\"]);var movies=res[\"data\"][\"results\"];var oldprops=_this3.props;_this3.setState({movies:movies,oldprops:oldprops});});console.log(this.state);}}},{key:\"render\",value:function render(){return makeSearch(this.props)===makeSearch(this.state.oldprops)?/*#__PURE__*/_jsx(ImageList,{cols:getNumberCols(),children:this.state.movies.map(function(item){return item.poster_path&&/*#__PURE__*/_jsxs(ImageListItem,{children:[/*#__PURE__*/_jsx(\"img\",{src:item.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(item.poster_path):\"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\",srcSet:item.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(item.poster_path):\"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\",alt:item.title,loading:\"lazy\"}),/*#__PURE__*/_jsx(ImageListItemBar,{position:\"bottom\",sx:{background:\"rgba(0,0,0,0)\"},actionIcon:/*#__PURE__*/_jsx(MovieButton,{id:item.id})})]},item.poster_path);})}):/*#__PURE__*/_jsx(LoadPage,{open:true});}}]);return PageContents;}(React.Component);export{PageContents as default};","map":null,"metadata":{},"sourceType":"module"}