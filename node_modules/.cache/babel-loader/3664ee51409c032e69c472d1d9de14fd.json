{"ast":null,"code":"import _classCallCheck from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lgentle/repos/CSCapstoneProject/react/cscapstone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import ImageList from\"@mui/material/ImageList\";import ImageListItem from\"@mui/material/ImageListItem\";import ImageListItemBar from\"@mui/material/ImageListItemBar\";import IconButton from\"@mui/material/IconButton\";import LocalMoviesIcon from\"@mui/icons-material/LocalMovies\";import{genreIds}from\"./genreIds\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getNumberCols(){var _window=window,width=_window.innerWidth;return Math.floor(width/200);}function getGenreID(genre){for(var i=0;i<props.genreIds.length;i++){if(genreIds[i][\"name\"]==genre){return genreIds[i][\"Id\"];}}}function makeSearch(props){var cert=\"\";console.log(props);for(var i=0;i<props.rating.length-1;i++){cert+=props.rating[i]+\"|\";}cert+=props.rating[props.rating.length-1];console.log(cert);var genres=\"\";for(var _i=0;_i<props.genreName.length-1;_i++){cert+=getGenreID(props.genreName[_i])+\"|\";}genres+=props.genreName[props.genreName.length-1];return\"/filters/\"+cert+\"/\"+props.year[0]+\"/\"+props.year[1]+\"/\"+props.runTime[0]+\"/\"+props.runTime[1]+\"/\"+genres;}var PageContents=/*#__PURE__*/function(_React$Component){_inherits(PageContents,_React$Component);var _super=_createSuper(PageContents);function PageContents(){var _this;_classCallCheck(this,PageContents);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],oldprops:{}};return _this;}_createClass(PageContents,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);axios.get(makeSearch(this.props)).then(function(res){console.log(res[\"data\"][\"results\"]);var movies=res[\"data\"][\"results\"];var oldprops=_this2.props;_this2.setState({movies:movies,oldprops:oldprops});});console.log(this.state);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this3=this;if(this.props!=this.state.oldprops){console.log(this.props);axios.get(makeSearch(this.props)).then(function(res){console.log(res[\"data\"][\"results\"]);var movies=res[\"data\"][\"results\"];var oldprops=_this3.props;_this3.setState({movies:movies,oldprops:oldprops});});console.log(this.state);}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(ImageList,{cols:getNumberCols(),children:this.state.movies.map(function(item){return item.poster_path&&/*#__PURE__*/_jsxs(ImageListItem,{children:[/*#__PURE__*/_jsx(\"img\",{src:item.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(item.poster_path):\"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\",srcSet:item.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(item.poster_path):\"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\",alt:item.title,loading:\"lazy\"}),/*#__PURE__*/_jsx(ImageListItemBar,{title:item.title,subtitle:item.rating,actionIcon:/*#__PURE__*/_jsx(IconButton,{sx:{color:\"rgba(255, 255, 255, 0.54)\"},\"aria-label\":\"info about \".concat(item.title),children:/*#__PURE__*/_jsx(LocalMoviesIcon,{})})})]},item.poster_path);})});}}]);return PageContents;}(React.Component);export{PageContents as default};","map":{"version":3,"sources":["/home/lgentle/repos/CSCapstoneProject/react/cscapstone/src/components/GridPageContents/PageContents.js"],"names":["React","ImageList","ImageListItem","ImageListItemBar","IconButton","LocalMoviesIcon","genreIds","axios","getNumberCols","window","width","innerWidth","Math","floor","getGenreID","genre","i","props","length","makeSearch","cert","console","log","rating","genres","genreName","year","runTime","PageContents","state","movies","oldprops","get","then","res","setState","map","item","poster_path","title","color","Component"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from \"@mui/material/ImageListItem\";\nimport ImageListItemBar from \"@mui/material/ImageListItemBar\";\nimport IconButton from \"@mui/material/IconButton\";\nimport LocalMoviesIcon from \"@mui/icons-material/LocalMovies\";\nimport { genreIds } from \"./genreIds\";\nimport axios from \"axios\";\n\nfunction getNumberCols() {\n  const { innerWidth: width } = window;\n  return Math.floor(width / 200);\n}\n\nfunction getGenreID(genre) {\n  for (let i = 0; i < props.genreIds.length; i++) {\n    if (genreIds[i][\"name\"] == genre) {\n      return genreIds[i][\"Id\"];\n    }\n  }\n}\n\nfunction makeSearch(props) {\n  let cert = \"\";\n  console.log(props);\n  for (let i = 0; i < props.rating.length - 1; i++) {\n    cert += props.rating[i] + \"|\";\n  }\n  cert += props.rating[props.rating.length - 1];\n  console.log(cert);\n\n  let genres = \"\";\n  for (let i = 0; i < props.genreName.length - 1; i++) {\n    cert += getGenreID(props.genreName[i]) + \"|\";\n  }\n  genres += props.genreName[props.genreName.length - 1];\n  return (\n    \"/filters/\" +\n    cert +\n    \"/\" +\n    props.year[0] +\n    \"/\" +\n    props.year[1] +\n    \"/\" +\n    props.runTime[0] +\n    \"/\" +\n    props.runTime[1] +\n    \"/\" +\n    genres\n  );\n}\n\nexport default class PageContents extends React.Component {\n  state = {\n    movies: [],\n    oldprops: {},\n  };\n\n  componentDidMount() {\n    console.log(this.props);\n    axios.get(makeSearch(this.props)).then((res) => {\n      console.log(res[\"data\"][\"results\"]);\n      const movies = res[\"data\"][\"results\"];\n      const oldprops = this.props;\n      this.setState({ movies, oldprops });\n    });\n    console.log(this.state);\n  }\n  componentDidUpdate() {\n    if (this.props != this.state.oldprops) {\n      console.log(this.props);\n      axios.get(makeSearch(this.props)).then((res) => {\n        console.log(res[\"data\"][\"results\"]);\n        const movies = res[\"data\"][\"results\"];\n        const oldprops = this.props;\n        this.setState({ movies, oldprops });\n      });\n      console.log(this.state);\n    }\n  }\n\n  render() {\n    return (\n      <ImageList cols={getNumberCols()}>\n        {this.state.movies.map(\n          (item) =>\n            item.poster_path && (\n              <ImageListItem key={item.poster_path}>\n                <img\n                  src={\n                    item.poster_path\n                      ? `https://image.tmdb.org/t/p/w500${item.poster_path}`\n                      : \"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\"\n                  }\n                  srcSet={\n                    item.poster_path\n                      ? `https://image.tmdb.org/t/p/w500${item.poster_path}`\n                      : \"https://www.digitalartsonline.co.uk/cmsdata/slideshow/3347360/Step2.jpg\"\n                  }\n                  alt={item.title}\n                  loading=\"lazy\"\n                />\n                <ImageListItemBar\n                  title={item.title}\n                  subtitle={item.rating}\n                  actionIcon={\n                    <IconButton\n                      sx={{ color: \"rgba(255, 255, 255, 0.54)\" }}\n                      aria-label={`info about ${item.title}`}\n                    >\n                      <LocalMoviesIcon />\n                    </IconButton>\n                  }\n                />\n              </ImageListItem>\n            )\n        )}\n      </ImageList>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}